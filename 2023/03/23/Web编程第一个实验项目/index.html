<!DOCTYPE html>
<html>
<head>
  <title>
    
    Web编程第一个实验项目 - 
    hsy的博客
  </title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  
  <link rel="shortcut icon" href="/panda.ico" />
  

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  
<link rel="stylesheet" href="/css/utils/clear.css">

  
<link rel="stylesheet" href="/css/style.css">


<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="hsy的博客" type="application/atom+xml">
</head>

<body>
  <div class="title">
  <img class="title_img" src="/images/panda.png" /><br>
  <p id="site_title">&nbsphsy的博客&nbsp</p>
</div>
  <div class="navi">
  <a id="navi_item" href="/#" class="menu-item-link">Home</a>
  <a id="navi_item" href="/tags" class="menu-item-link">Tags</a>
  <a id="navi_item" href="/about" class="menu-item-link">About</a>
  <a id="navi_item" href="/search" class="menu-item-link">Search</a>
  
</div>

<hr />

  <div class="main">
    
<link rel="stylesheet" href="/css/post.css">

<post>

  <div class="post_title">
    Web编程第一个实验项目
  </div>

  <br /><br />

  <div id="post_content">
    <h2 id="题目要求："><a href="#题目要求：" class="headerlink" title="题目要求："></a>题目要求：</h2><p>新闻爬虫及爬取结果的查询网站<br>核心需求:<br>1、选取3-5个代表性的新闻网站 (比如新浪新闻、网易新闻等，或者某个垂直领域权威性的网站比如经济领域的雪球财经、东方财富等，或者体育领域的腾讯体育、虎扑体育等等)建立爬虫，针对不同网站的新闻页面进行分析，爬取出编码、标题、作者、时间、关键词、摘要、内容、来源等结构化信息，存储在数据库中<br>2、建立网站提供对爬取内容的分项全文搜索，给出所查关键词的时间热度分析。</p>
<h2 id="项目完成步骤"><a href="#项目完成步骤" class="headerlink" title="项目完成步骤"></a>项目完成步骤</h2><p>使用Node.js和模板库Cheerio，request做一个爬虫代码，爬取<a target="_blank" rel="noopener" href="https://news.sina.com.cn/china/">新浪新闻</a>，<a target="_blank" rel="noopener" href="https://news.163.com/domestic/">网易新闻</a>，<a target="_blank" rel="noopener" href="http://www.chinanews.com/">中国新闻网</a>中的各个部分。<br>下面以新浪新闻为例，分析页面：</p>
<h3 id="1-新闻页面分析"><a href="#1-新闻页面分析" class="headerlink" title="1. 新闻页面分析"></a>1. 新闻页面分析</h3><h4 id="1-1-对某一篇新闻页面元素进行分析："><a href="#1-1-对某一篇新闻页面元素进行分析：" class="headerlink" title="1.1 对某一篇新闻页面元素进行分析："></a>1.1 对<a target="_blank" rel="noopener" href="https://news.sina.com.cn/c/2021-04-22/doc-ikmxzfmk8332048.shtml">某一篇新闻页面</a>元素进行分析：</h4><ul>
<li><p>标题  <code>main-title</code></p>
</li>
<li><p>作者 <code>show_author</code></p>
</li>
<li><p>时间 <code>date</code></p>
</li>
<li><p>关键字：正则化匹配：<code>$(&#39;meta[name=\&quot;keywords\&quot;]&#39;).eq(0).attr(\&quot;content\&quot;)&quot;    </code></p>
</li>
<li><p>内容 <code>article</code></p>
</li>
<li><p>来源 <code>source</code></p>
<h4 id="1-2-对新闻网页的URL进行分析"><a href="#1-2-对新闻网页的URL进行分析" class="headerlink" title="1.2 对新闻网页的URL进行分析"></a>1.2 对新闻网页的URL进行分析</h4><pre><code>https://news.sina.com.cn/c/2021-04-23/doc-ikmxzfmk8553784.shtml
https://news.sina.com.cn/c/2021-04-23/doc-ikmyaawc1428218.shtml
https://news.sina.com.cn/o/2021-04-22/doc-ikmxzfmk8371786.shtml
</code></pre>
<p>从上述三个网址可知，每个网页都是由</p>
</li>
<li><p><code>https://news.sina.com.cn</code> 网页链接</p>
</li>
<li><p><code>/o/</code> 一个字母</p>
</li>
<li><p><code>2021-04-22</code> 年月日，由四个数字-两个数字-两个数字组成</p>
</li>
<li><p><code>doc-ikmxzfmk8371786.shtml</code> doc-15个字符.shtml<br>因此可以写出匹配网页的正则化为：<code>/\/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)\/doc-(\w&#123;15&#125;).shtml/</code></p>
</li>
</ul>
<h3 id="2-数据库设计和代码实现"><a href="#2-数据库设计和代码实现" class="headerlink" title="2. 数据库设计和代码实现"></a>2. 数据库设计和代码实现</h3><h5 id="2-1-设计数据库"><a href="#2-1-设计数据库" class="headerlink" title="2.1 设计数据库"></a>2.1 设计数据库</h5><ul>
<li>在mysql中创建数据库<code>crawlnews</code>，然后在该数据库里创建表<code>fetches</code>:</li>
<li>根据第1步分析的网页元素，设置fetches表的结构，url设置的属性为<code>UNIQUE</code>，因此插入数据之前需要判断是否已经爬取过相同的网页。<h5 id="2-2-数据库连接和查询代码"><a href="#2-2-数据库连接和查询代码" class="headerlink" title="2.2 数据库连接和查询代码"></a>2.2 数据库连接和查询代码</h5></li>
<li>在js爬虫代码中使用mysql，需要先引用mysql文件。<pre><code class="javascript">var mysql = require(&#39;./mysql.js&#39;);
</code></pre>
</li>
<li>其中在<code>mysql.js</code>连接数据库，并且完成了带参数和不带参数的sql语句查询。（<em>password需要写自己mysql的密码</em>）</li>
</ul>
<h3 id="3-网页展示"><a href="#3-网页展示" class="headerlink" title="3. 网页展示"></a>3. 网页展示</h3><p>完成第4步后，又对网页进行了：</p>
<ol>
<li> 主页设计：实现了两个功能页面的跳转。</li>
<li>CSS设计：使得页面更加美观</li>
<li>导航栏设计：使得页面的跳转更加方便。<br>因此最终网页展示如下：</li>
</ol>
<ul>
<li><p><strong>主页</strong>(localhost:3000):</p>
<pre><code>             可以跳转至：
              -   关键词查询网页（search.html)
                   -   时间热度分析网页（wordhot.html)
</code></pre>
</li>
<li><p><strong>关键词查询</strong>网页（search.html):<br>当输入想要查询的词后，可以以列表的形式显示查询结果：</p>
<ul>
<li>仅查询<code>title</code>：</li>
<li>查询<code>title</code>和<code>keywords</code>:</li>
<li>查询<code>title</code>，<code>content</code>和<code>keywords</code>:</li>
</ul>
</li>
<li><p>  <strong>时间热度分析</strong>网页（wordhot.html)</p>
</li>
</ul>
<p>输入想要查询的标题，会显示数据库中的新闻中包含该词的数量，并且按照日期绘制折线图。使得时间热度分析更加直观。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>在本次项目中，理解js代码是如何运行的，该怎么设计一个网站的框架，如何使用代码对网页和服务器进行通信，是比较重要也是我比较薄弱的方面。</li>
<li>实践了使用js进行爬虫和构建网页，学习到了前后端如何通过request和response进行交互，怎么在网页中插入图表，对网页设置CSS，完成了作业的要求。</li>
<li>但因为对js和html代码仍然不太熟悉，因此没有完成分页功能，希望在之后对代码进行改进和优化。</li>
<li>通过本次项目发现，只有真实的完成过任务，才能真正掌握一门语言。希望之后也能主动使用js。</li>
</ul>

  </div>

  <br />

  
  <br /><br />


  

<div class="copyright">

  <a class="license-image" rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by
-nc
-sa
/4.0/"><img alt="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License" style="border-width:0" src="https://i.creativecommons.org/l/by
-nc
-sa
/4.0/80x15.png" />
  </a>

  <p>This work is licensed under a
    <a class="license-word-hyper" rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by
-nc
-sa
/4.0/">
      Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
  </p>
</div>

  <div id="top">
  <div onclick="window.scrollTo({top: 0, behavior: 'smooth'})">▲</div>
  <div onclick="document.getElementById('footer').scrollIntoView({behavior: 'smooth'})">▼</div>
</div>
  

</post>
  </div>

  <foot id="footer">
  <hr class="boldline" />
  <br>

  <p class="center font">
    
    <a target="_blank" rel="noopener" href="https://github.com/hsy77">
  <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
   <path class="icon_path" d="M427.392 853.504a61.44 61.44 0 0 1-1.450667 15.530667 92.586667 92.586667 0 0 1-10.965333 27.605333c-15.061333 25.301333-40.661333 42.154667-73.642667 42.154667-77.653333 0-108.117333-38.101333-146.261333-133.504C169.216 740.693333 157.013333 725.461333 128 725.461333v-85.333333c77.653333 0 108.117333 38.101333 146.261333 133.504 25.856 64.597333 38.058667 79.786667 67.072 79.786667 0-12.373333-0.170667-23.296-0.512-38.144-0.853333-34.816-0.938667-41.941333 0.554667-51.2 0.64-20.352 5.888-34.773333 16.384-49.066667-95.232-20.736-159.445333-63.573333-196.309333-132.992l-13.824-32.426667C134.186667 510.848 128 467.072 128 416.426667c0-58.24 17.749333-110.336 50.944-153.856-10.368-41.386667-8.96-91.989333 13.909333-149.077334l7.466667-18.688 19.2-6.101333c2.56-0.853333 5.632-1.578667 9.301333-2.133333 37.290667-5.888 90.325333 8.106667 159.701334 52.48a565.930667 565.930667 0 0 1 127.274666-14.208c38.741333 0 77.226667 3.882667 114.048 11.605333 67.456-42.24 119.04-55.509333 155.306667-49.92 3.626667 0.597333 6.741333 1.322667 9.258667 2.133333l19.285333 6.101334 7.466667 18.773333c20.010667 50.218667 23.424 96.469333 16.128 136.96C875.434667 296.32 896 352.597333 896 416.512c0 53.888-3.84 94.378667-14.933333 133.802667l-11.733334 32.170666c-30.677333 69.333333-98.304 112.64-202.538666 133.248 10.837333 15.018667 15.872 30.250667 15.872 52.394667v42.666667l-0.042667 42.666666a13.013333 13.013333 0 0 0 0.341333 2.730667L682.666667 938.794667c-36.352 0-63.36-17.706667-76.672-45.653334a88.277333 88.277333 0 0 1-8.661334-40.277333v-84.736c0-3.584-0.128-3.797333-8.832-12.501333-23.296-23.296-33.834667-40.874667-33.834666-72.832v-38.613334l38.4-3.84c114.346667-11.52 176.512-43.221333 197.12-89.6l9.6-26.325333c7.68-27.562667 10.88-61.098667 10.88-107.946667 0-49.706667-17.365333-90.837333-50.218667-123.648L742.4 274.773333l7.381333-24.448c6.528-21.717333 8.106667-47.402667 1.152-76.714666a158.634667 158.634667 0 0 0-3.584 0.938666c-22.826667 6.4-51.370667 20.053333-85.76 43.008l-15.658666 10.453334-18.304-4.522667a467.754667 467.754667 0 0 0-111.829334-13.269333c-42.709333 0-84.906667 5.418667-123.946666 16.042666l-19.029334 5.205334-16.256-11.136c-35.541333-24.32-65.109333-38.826667-88.746666-45.568a158.293333 158.293333 0 0 0-4.864-1.28c-8.234667 33.92-4.992 61.781333 3.413333 82.688l9.984 25.088-18.346667 19.797333C228.693333 332.629333 213.333333 370.986667 213.333333 416.512c0 41.685333 4.864 76.202667 13.824 102.229333l11.178667 26.453334c27.904 52.352 87.168 83.84 192.853333 95.146666l38.144 4.096v38.357334c0 32-10.538667 49.536-33.834666 72.832-8.704 8.704-8.832 8.96-8.832 12.501333l-0.725334 7.893333c-0.512 2.56-0.512 9.258667 0.170667 37.205334 0.298667 12.8 0.469333 22.997333 0.554667 33.621333a33.962667 33.962667 0 0 1 0.725333 6.656z"/>
  </svg>
 </a>

    
    
    
    <a target="_blank" rel="noopener" href="https://t.me/username">
  <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <path d="M834.24 127.872a95.168 95.168 0 0 0-29.856 7.136h-0.128c-9.12 3.616-52.48 21.856-118.4 49.504l-236.224 99.488c-169.504 71.36-336.128 141.632-336.128 141.632l1.984-0.768s-11.488 3.776-23.488 12a64.96 64.96 0 0 0-18.752 18.144c-5.888 8.64-10.624 21.856-8.864 35.52 2.88 23.104 17.856 36.96 28.608 44.608 10.88 7.744 21.248 11.36 21.248 11.36h0.256l156.256 52.64c7.008 22.496 47.616 156 57.376 186.752 5.76 18.368 11.36 29.856 18.368 38.624 3.392 4.48 7.36 8.224 12.128 11.232a35.808 35.808 0 0 0 7.872 3.392l-1.6-0.384c0.48 0.128 0.864 0.512 1.216 0.64 1.28 0.352 2.144 0.48 3.776 0.736 24.736 7.488 44.608-7.872 44.608-7.872l1.12-0.896 92.256-84 154.624 118.624 3.52 1.504c32.224 14.144 64.864 6.272 82.112-7.616 17.376-13.984 24.128-31.872 24.128-31.872l1.12-2.88 119.488-612.128c3.392-15.104 4.256-29.248 0.512-42.976a57.824 57.824 0 0 0-24.992-33.504 59.904 59.904 0 0 0-34.144-8.64z m-3.232 65.6c-0.128 2.016 0.256 1.792-0.64 5.664v0.352l-118.368 605.76c-0.512 0.864-1.376 2.752-3.744 4.64-2.496 1.984-4.48 3.232-14.88-0.896l-189.12-144.992-114.24 104.128 24-153.28 308.992-288c12.736-11.84 8.48-14.336 8.48-14.336 0.896-14.528-19.232-4.256-19.232-4.256l-389.632 241.376-0.128-0.64-186.752-62.88v-0.128l-0.48-0.096a8.64 8.64 0 0 0 0.96-0.384l1.024-0.512 0.992-0.352s166.752-70.272 336.256-141.632c84.864-35.744 170.368-71.744 236.128-99.52 65.76-27.616 114.368-47.872 117.12-48.96 2.624-1.024 1.376-1.024 3.264-1.024z"/>
  </svg>
</a>

    
    
    
    
    
    
    
    
  <p>
    <br>
  <p id="hitokoto">:D 获取中...</p>
  <script src="https://v1.hitokoto.cn/?c=a&encode=js&select=%23hitokoto" defer></script>
  <br>
  <p class="center font">
    &copy - <a href="http://example.com">HeShiYu</a> -  2023 - Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/pcrab/hexo-theme-quark"> Quark </a> 
  </p>
  <p>
    <a href="https://beian.miit.gov.cn/" target="_blank"></a>
  </p>
  <br />
</foot>
</body>

</html>